> å“ï¼ŒçœŸä¸æƒ³çœ‹ğŸ˜–ï¼Œè¿˜æ˜¯ç¿»è¯‘ä¸€éå§ï¼Œå°è±¡æ›´æ·±åˆ»

## Reactç”Ÿå‘½å‘¨æœŸ

### å¸¸è§„æ–¹æ³•

#### render()

renderæ–¹æ³•æ˜¯ä½¿ç”¨æœ€å¤šçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œä½ èƒ½åœ¨classä¸­çœ‹åˆ°ä»–ï¼Œå› ä¸ºå®ƒæ˜¯classçš„å¿…é¡»å‚æ•°

å®ƒä¼šåœ¨ç»„å»ºç”Ÿæˆå’Œæ›´æ–°çš„æ—¶å€™è°ƒç”¨

renderæ–¹æ³•å¿…é¡»æ˜¯çº¯å‡€çš„å‡½æ•°å¹¶ä¸”æ²¡æœ‰å‰¯ä½œç”¨

#### componentDidMount()

å½“ä½ çš„ç»„å»ºå·²ç»è¢«ç”Ÿæˆå¹¶ä¸”å‡†å¤‡å¥½äº†ï¼Œå°±åˆ°äº†component Did Mountæ–¹æ³•è¿è¡Œçš„æ—¶å€™

å®ƒä¼šåœ¨ç»„ä»¶å‡†å¤‡å¥½çš„æ—¶å€™è¿è¡Œï¼Œè¿™æ˜¯è°ƒç”¨APIçš„å¥½æœºä¼š

åœ¨è¿™é‡Œä½¿ç”¨setStateæ–¹æ³•ï¼Œä½ å°†ä¼šåœ¨ç»„ä»¶æ¸²æŸ“ä¹‹å‰æ›´æ–°ç»„ä»¶ï¼Œæ‰€ä»¥ä½ å¹¶ä¸ä¼šçœ‹åˆ°ä¸¤æ¬¡æ¸²æŸ“ç»“æœ

ä½†æ˜¯ä½ æœ€å¥½è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œä½ æœ€å¥½åº”è¯¥åœ¨æ„é€ å‡½æ•°ä¸­å°±å®šä¹‰å¥½state

#### componentDidUpdate()

è¿™ä¸ªæ–¹æ³•å°†åœ¨ç»„ä»¶æ›´æ–°çš„æ—¶å€™è°ƒç”¨ï¼Œæœ€å¸¸è§çš„å°±æ˜¯åœ¨æ›´æ–°ç»„ä»¶çš„æ—¶å€™è¿›è¡Œé¢å¤–çš„DOMæ›´æ–°

ä½ å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è°ƒç”¨setStateï¼Œä½†æ˜¯ä½ æœ€å¥½å…ˆç”¨é»˜è®¤å‚æ•°æ¥åˆ¤æ–­ï¼Œé˜²æ­¢æ— é™å¾ªç¯

æ¯”å¦‚ï¼š

```javascript
componentDidUpdate(prevProps){
  if(this.props.userName !== prevProps.userName){
    this.fetchData(this.props.userName)
  }
}
```

#### componentWillUnmount()

è¿™ä¸ªæ–¹æ³•å°†åœ¨ç»„ä»¶è¢«é”€æ¯ä¹‹å‰è°ƒç”¨

### éå¸¸è§„æ–¹æ³•

#### shouldComponentUpdate()

è¿™ä¸ªæ–¹æ³•åœ¨ä½ ä¸æƒ³è®©reactè‡ªåŠ¨åœ¨æ•°æ®å˜åŠ¨çš„æ—¶å€™æ¸²æŸ“çš„æ—¶å€™å¸®åŠ©ä½ 

æ³¨æ„è¿™ä¸ªæ–¹æ³•è¦ä¿å®ˆä½¿ç”¨

```javascript
shouldComponentUpdate(nextProps, nextState){
  return this.props.title !== nextProps.title || 
    this.state.input !== nextState.input
}
```

#### static getDerivedStateFromProps()

è¿™æ˜¯reactå›¢é˜Ÿæ–°å¢çš„æ–¹æ³•

è¿™å¯ä»¥ä½œä¸ºä¹‹å‰çš„`componentWillReceiveProps()`æ–¹æ³•çš„å®‰å…¨å¤‡ç”¨é€‰æ‹©

å®ƒåœ¨renderæ–¹æ³•ä¹‹å‰è°ƒç”¨

è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•æ‰€ä»¥ä¸èƒ½è®¿é—®â€œthisâ€

è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥å¯¹åº”propsæ›´æ–°state

å®ƒå¯ä»¥è¿”å›nullï¼Œå½“ä¸éœ€è¦æ›´æ–°state

è¿™ä¸ªæ–¹æ³•å¾ˆå°‘ä¼šç”¨ï¼Œä¸€èˆ¬å½“ç»„ä»¶çš„stateä¾èµ–äºpropsçš„æ—¶å€™ä¼šä½¿ç”¨

```javascript
static getDerivedStateFromProps(props, state){
  if(props.currentRow !== state.lastRow){
    return{
      isScrollingDown: props.currentRow > state.lastRow,
      lastRow: props.currentRow
    }
  }
  return null;
}
```

å½“ä¸€ä¸ªç»„ä»¶è¦æ¯”è¾ƒå‰åchildrenæ¥å†³å®šæ·¡å…¥æ·¡å‡ºçš„æ—¶å€™å¯èƒ½ä¼šç”¨åˆ°

#### getSnapshotBeforeUpdate(prevProps, prevState)

è¿™æ˜¯ä¹‹å‰çš„`componentWillUpdate()`æ–¹æ³•çš„å®‰å…¨å¤‡é€‰

å®ƒåœ¨DOMæ›´æ–°å‰è°ƒç”¨ï¼Œå®ƒçš„è¿”å›å€¼ä¼šä¼ é€’åˆ°`componentDidUpdate`

#### recapå›¾è§£

![](lifecycle.webp)